<div *ngIf="params.type==='newRequest'">
    <div class="aggrid-content-center new-request">
      <span class="plus-icon"> + </span>
      <span class="content"> New Request </span>
    </div>
  </div>
  
  <div *ngIf="params.type=='multiple-values'">
    <div *ngIf="params.value" style="display:flex;flex-wrap:wrap;">
      <div *ngFor="let item of params.value" class="aggrid-content-center multiple-text w-auto">
        <span [matTooltip]="item" class="aggrid-text-resizable">{{item}}</span>
      </div>
    </div>
  </div>
  
  <div *ngIf="params.type=='link'">
    <div matTooltip="{{params.value}}" [ngClass]="params.cellClass">
      <a href="{{shiptechOrderUrl}}/{{params.data?.order_id_vlsfo}}">{{params.value}}</a>
    </div>
  </div>
  
  <div *ngIf="params.type=='popup-multiple-values'">
  <hover-menu #menu [items]="params.value"></hover-menu>
  </div>
  
  
  <div *ngIf="params.type=='edit'">
    <div [matTooltip]="inp.value"><input #inp [ngClass]="params.cellClass" [value]=params.value
        (keydown)="triggerChangeEvent()"></div>
  </div>
  <div *ngIf="params.type=='edit-safe-port'">
    <div [matTooltip]="inp.value"><input #inp [ngClass]="params.cellClass" [value]=params.valueFormatted
        (keydown)="triggerChangeEvent()"></div>
  </div>

  <div class="cons" *ngIf="params.type=='edit-cons'">
    <div [matTooltip]="inp.value"><input #inp  [ngClass]="params.cellClass" [value]=params.value (change)="consUpdatedEvent(params,inp.value)"
        (keydown)="triggerChangeEvent()"></div>
  </div>

  <div class= "soa"*ngIf="params.type=='edit-soa'">
    <div matTooltip="{{params.value}}" [ngClass]="params.cellClass">
      {{params.value}}</div>
  </div>
  
  <div *ngIf="params.type=='edit-disabled'">
    <div [matTooltip]="inp.value"><input #inp disabled [ngClass]="params.cellClass" [value]=params.value></div>
  </div>
  <div *ngIf="params.type=='edit-disabled-safe-port'">
    <div [matTooltip]="inp.value"><input #inp disabled [ngClass]="params.cellClass" [value]=params.valueFormatted></div>
  </div>
  
  <div *ngIf="params.type=='disable-with-popup'">
    <div (mouseenter)="!menuClick  && toggleMenuInput($event,params.value);" (click)="toggleMenu3Input($event)"
      (mouseleave)="!menuClick  && toggleMenu2Input();" (menuClosed)="toggleMenu1Input($event);">
      <input disabled style="z-index: 1050;" [matMenuTriggerFor]="inputDisabledMenu" [matMenuTriggerData]="menuData"
        #inputMenuTrigger="matMenuTrigger" [ngClass]="params.cellClass" [value]="menuData.value">
      <!-- <span *ngIf="menuData.comments && menuData.comments!=''">
        <img class="infoIcon" src="./assets/customicons/info_amber.svg" alt="info">
      </span> -->
    </div>
  </div>
  <mat-menu #inputDisabledMenu="matMenu" class="common" xPosition="after">
    <ng-template matMenuContent let-data="menuData">
    <div class="edit-input-menu" [ngClass]="{'light-theme':!theme}">
      <div class="row header">
        <div>
          Port of {{params.data?.port_id}} ({{params.data?.port_id}})
        </div>
        <div class="line"></div>
        <div (click)="cancel()">
          <mat-icon class="close">close</mat-icon>
        </div>
      </div>
      <div class="input">
        <div>{{params.column.colDef.headerName}}</div>
        <mat-form-field appearance="fill">
          <input matInput disabled style="color:white;" [value]="menuData.value">
        </mat-form-field>
      </div>
      <div class="comments">
        <div>Comments</div>
        <mat-form-field appearance="fill">
          <textarea matInput disabled [value]="menuData.comments"></textarea>
        </mat-form-field>
      </div>
      </div>
    </ng-template>
  </mat-menu>
  
  <div *ngIf="params.type=='edit-with-popup'">
    <div (mouseenter)="!menuClick  && toggleMenuInput($event,params.value);" (click)="toggleMenu3Input($event)"
      (mouseleave)="!menuClick  && toggleMenu2Input();" (menuClosed)="toggleMenu1Input($event);">
      <input disabled style="z-index: 1050;" #inp [matMenuTriggerFor]="inputEditMenu" [matMenuTriggerData]="menuData"
        #inputMenuTrigger="matMenuTrigger" [ngClass]="params.cellClass" [value]="params.value">
      <!-- <span *ngIf="params.value && params.value!=''">
        <img class="infoIcon" src="./assets/customicons/info_amber.svg" alt="info">
      </span> -->
    </div>
  </div>
  <mat-menu #inputEditMenu="matMenu" class="common" xPosition="after">
    <ng-template matMenuContent let-data="menuData">
    <div class="edit-input-menu" [ngClass]="{'light-theme':!theme}">
      <div class="row header">
        <div>
          Port of {{params.data?.port_id}} ({{params.data?.port_id}})
        </div>
        <div class="line"></div>
        <div (click)="cancel()">
          <mat-icon class="close">close</mat-icon>
        </div>
      </div>
      <div class="input">
        <div>{{params.column.colDef.headerName}}</div>
        <mat-form-field appearance="fill">
          <input matInput #inpt id="inputValue" [value]="menuData.value" (keyup)="onEditCell()"
            (click)="$event.stopPropagation();">
        </mat-form-field>
      </div>
      <div class="comments">
        <div>Comments</div>
        <mat-form-field appearance="fill">
          <textarea matInput #cmnt [(ngModel)]="usercomments" (keyup)="onEditCell()"
            (click)="$event.stopPropagation();"></textarea>
        </mat-form-field>
      </div>
      <div class="actions">
        <button mat-button class="cancel" (click)="cancel()">CANCEL</button>
        <button mat-raised-button [disabled]="!enableSave" [ngClass]="{'active':enableSave}" class="save"
          (click)="saveInput(inpt.value)">Proceed</button>
      </div>
      </div>
    </ng-template>
  </mat-menu>
  
  <div *ngIf="params.type=='checkbox-disabled'" [ngClass]="params.cellClass">
    <div style="cursor:pointer;" (mouseenter)="!menuClick  && toggleMenuInput($event,params.value);" (click)="toggleMenu3Input($event)"
      (mouseleave)="!menuClick  && toggleMenu2Input();">
      <div style="z-index: 1050;pointer-events:none;" [matMenuTriggerFor]="checkboxDisabledMenu" [matMenuTriggerData]="menuData"
      #inputMenuTrigger="matMenuTrigger">
      <mat-checkbox disabled   style="cursor:pointer;" [ngClass]="params.cellClass" [checked]="menuData.value">
      </mat-checkbox>
      </div>
      <!-- <span *ngIf="menuData.comments && menuData.comments!=''">
        <img class="infoIcon" src="./assets/customicons/info_amber.svg" alt="info">
      </span> -->
    </div>
  
  </div>
  <mat-menu #checkboxDisabledMenu="matMenu" class="common edit-checkbox-menu" xPosition="after">
    <ng-template matMenuContent let-data="menuData">
    <div id="edit-checkbox-menu" [ngClass]="{'light-theme':!theme}">
      <div class="row header">
        <div>
          Port of {{params.data?.port_id}} ({{params.data?.port_id}})
        </div>
        <div class="line"></div>
        <div (click)="cancel()">
          <mat-icon class="close">close</mat-icon>
        </div>
      </div>
      <div class="input">
        <div>
          <span class="checkbox-title">Min SOA</span>
          <mat-checkbox disabled class="checkbox" [checked]="menuData.value">
          </mat-checkbox>
        </div>
      </div>
      <div class="comments">
        <div>Comments</div>
        <mat-form-field appearance="fill">
          <textarea matInput disabled [value]="menuData.comments"></textarea>
        </mat-form-field>
      </div>
      </div>
    </ng-template>
  </mat-menu>
  
  <div *ngIf="params.type=='checkbox'" [ngClass]="params.cellClass">
    <mat-checkbox #check class="checkbox" [(ngModel)]="params.data.operator_ack" [checked]="(params.data?.is_new_port == 'Y') || params.data?.operator_ack" (click)="toggleOperAck()"></mat-checkbox>
  </div>
  
  <div *ngIf="params.type=='checkbox-with-popup'" [ngClass]="params.cellClass">
  
    <div  style="cursor:pointer;" (mouseenter)="!menuClick  && toggleMenuCheckbox($event);"
    (click)="toggleMenu3Checkbox($event)"
    (mouseleave)="!menuClick  && toggleMenu2Checkbox();">
    <mat-checkbox style="z-index: 1050;pointer-events:none;" disabled 
    [matMenuTriggerFor]="checkboxEditMenu"
  [matMenuTriggerData]="menuData" #inputMenuTrigger="matMenuTrigger" >
    </mat-checkbox>
    <!-- <span *ngIf="menuData.comments && menuData.comments!=''">
      <img class="infoIcon" src="../assets/customicons/info_amber.svg" alt="info">
    </span> -->
  </div>
  </div>
  <mat-menu #checkboxEditMenu="matMenu" class="common edit-checkbox-menu" xPosition="after" yPosition="below">
    <ng-template matMenuContent let-data="menuData">
    <div id="edit-checkbox-menu" [ngClass]="{'light-theme':!theme}">
      <div class="row header">
        <div>
          Port of {{params.data?.port_id}} ({{params.data?.port_id}})
        </div>
        <div class="line"></div>
        <div (click)="cancel()">
          <mat-icon class="close">close</mat-icon>
        </div>
      </div>
      <div class="input">
        <div>
          <span class="checkbox-title">Min SOA</span>
          <mat-checkbox #chk class="checkbox" [(ngModel)]="isChecked" (click)="onCheckboxClick($event)">
          </mat-checkbox>
        </div>
      </div>
      <div class="comments">
        <div>Comments</div>
        <mat-form-field appearance="fill">
          <textarea matInput #cmnt [(ngModel)]="usercomments" (keyup)="onEditCell()"
            (click)="$event.stopPropagation();"></textarea>
        </mat-form-field>
      </div>
      <div class="actions">
        <button mat-button class="cancel" (click)="cancel()">CANCEL</button>
        <button mat-raised-button [disabled]="!enableSave" [ngClass]="{'active':enableSave}" class="save"
          (click)="saveCheckbox()">Proceed</button>
      </div>
      </div>
    </ng-template>
  </mat-menu>
  
  <div class="port-cell" *ngIf="params.type=='port-readOnly'">
    <div matTooltip="{{params.value}}" [ngClass]="params.cellClass"
      style="text-align: left;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;margin: 0px 5px;width: 90px;">
      {{params.value}}</div>
  </div>
  
  <div class="port-cell" *ngIf="params.type=='port'" style="display:flex;">
    <div style="width:15px;">
      <mat-checkbox #check [ngClass]="{'cell-checkbox':!check.checked}" [(ngModel)]="params.data.createReqFlag"
        (change)="portClicked({event:$event, param: params})">
      </mat-checkbox>
    </div>
    <div matTooltip="{{params.value}}" style="text-align: left;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;margin: 0px 5px;width: 45px;">
      {{params.value}}
    </div>
    <div >
      <div class="info-i" (click)="toggleMenu3Info($event)" 
        (mouseenter)="!menuClick  && toggleMenuInfo($event,params.value);"
        (mouseleave)="!menuClick  && toggleMenu2Info();">
        <div style="z-index: 1050;pointer-events:none;"
        #infomenuTrigger="matMenuTrigger" [matMenuTriggerFor]="infoPopup"
          [matMenuTriggerData]="{data:params.value}">
          <span>i</span>
      </div>
  
    </div>
  </div>
  <li *ngIf="params.data?.redelivery_port" style="width:15px;" style="color:red;margin-bottom:11px;"> </li>
  <mat-menu  #infoPopup="matMenu" xPosition="after" class="common">
    <ng-template matMenuContent let-data="data">
      <div class="info_popup" [ngClass]="{'light-theme':!theme}">
        <div class="row info-header">
          <div>
            Port of {{params.data.port_id}} ({{params.data.port_id}})
          </div>
          <div *ngIf="params.data?.redelivery_port">
            <ul style="padding-right:65px;padding-left:10px; margin: 3px 4px 6px;">
            <li><span class="sub-content-title">Port for Redelivery</span></li>
            </ul>
          </div>  
          <div class="line"></div>
          <div (click)="cancelMenu()">
            <mat-icon class="close">close</mat-icon>
          </div>
        </div>
        <div class="row info-content">
          <div>
            Vessel arrival details
          </div>
          <div>
            <ul style="padding-left: 14px;vertical-align: middle; margin: 6px 0px 0px;">
              <li><span class="sub-content-title">ETA: </span><span class="sub-content-value">{{params.data.eta_date}} | {{etaDays}} days</span></li>
              <li><span class="sub-content-title">ETD: </span><span class="sub-content-value">{{params.data.etd_date}} | {{etdDays}} days</span></li>
            </ul>
          </div>
        </div>
        <div class="line"></div>
        <div class="row info-content">
          <div>
            Reserve Rule - excluding unpumpables
          </div>
          <div class="chip">
            <div class="row chips">
              <div class="col-3 pd-0 m-r-5">
                <div class="chip-value">
                  {{params.data.hsfo_reserve}}
                  <span class="unit">MT</span>
                </div>
                <div class="chip-name">
                  HSFO
                </div>
              </div>
              <div class="col-3 pd-0 m-l-r-5">
                <div class="chip-value">
                  {{params.data.eca_reserve}}
                  <span class="unit">MT</span>
                </div>
                <div class="chip-name">
                  ECA
                </div>
              </div>
              <div class="col-3 pd-0 m-l-5">
                <div class="chip-value">
                  {{params.data.lsdis_reserve}}
                  <span class="unit">MT</span>
                </div>
                <div class="chip-name">
                  LSDIS
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="line"></div>
        <div class="row info-content">
          <div >
            Service details
          </div>
          <div>
            <ul style="padding-right:65px;padding-left:10px; margin: 6px 0px 0px;">
              <li><span class="sub-content-title">Service ID: </span><span class="sub-content-value">{{params.data.service_code}}</span></li>
              <li><span class="sub-content-title">End of Service: </span><span class="sub-content-value">{{params.data.is_end_of_service=='N'?'NO':'YES'}}</span></li>
            </ul>
          </div>
        </div>
        <div class="line"></div>
        <div class="row info-content">
          <div>
            Voyage details
          </div>
          <div>
            <ul style="padding-right:65px;padding-left:10px; margin: 6px 0px 0px;">
              <li><span class="sub-content-title">End of Voyage: </span><span class="sub-content-value">{{params.data?.is_end_of_voyage=='N'?'NO':'YES'}}</span></li>
            </ul>
          </div>
        </div>
        <div class="line"></div>
        <div class="row info-footer">
          <a href="{{shiptechPortUrl}}/{{params.data?.port_id}}">Link to Port Master</a>
        </div>
      </div>
    </ng-template>
  </mat-menu>
  