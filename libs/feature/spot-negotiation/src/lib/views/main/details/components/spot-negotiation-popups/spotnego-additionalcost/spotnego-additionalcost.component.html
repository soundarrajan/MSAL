<div class="spot-popup-header-container applicable-cost-popup-header">
  <div class="spot-nego-title">Additional Costs</div>
  <div class="spot-dialog-title-right popup-header-form">
    <button class="save-btn" mat-button>
      Save
    </button>
    <div class="title-divider">|</div>
    <div class="close-circle" style="padding:0px;">
      <mat-icon
        id="dialogCloseButton"
        matSuffix
        class=""
        (click)="closeDialog()"
        style="font-size: 14px; display: inline; "
        >close</mat-icon
      >
    </div>
  </div>
</div>
<hr class="hr-line" />
<div class="p-r-15 p-l-15 additional-cost-subheading1">
  Offer Additional Costs
</div>
<div class="product-terms p-b-5 p-r-15 p-l-15">
  <div class="operations-details-block">
    <table>
      <thead>
        <tr>
          <th
            class="increment-circle-button"
            style="width: 30px;"
            (click)="addNew()"
          >
            <div class="increment-circle">
              <div class="plus">+</div>
            </div>
          </th>
          <th class="text-left">Cost Name</th>
          <th class="text-left">Cost Type</th>
          <th class="text-left ">Max Qty</th>
          <th class="text-left" style="width: 275px;">
            Price
          </th>
          <th class="text-left">Applicable for</th>
          <th class="text-left">Extra(%)</th>
          <th class="text-left">Extra Amt</th>
          <th class="text-left">Total Amt</th>
          <th class="text-left">Rate/MT</th>
          <!-- <th class=" text-left">Comments</th> -->
        </tr>
      </thead>
    </table>
    <div style="height: 107px; overflow-y: scroll;">
      <table>
        <tbody>
          <tr
            class="border-bottom"
            *ngFor="
              let offerAdditionalCost of offerAdditionalCostList;
              let j = index
            "
          >
            <td
              class="decrement-circle-button"
              (click)="removeCost(j, offerAdditionalCost)"
              style="width: 30px;"
            >
              <div class="decrement-circle">
                <div class="minus">-</div>
              </div>
            </td>
            <td class="text-left cell-dashed-border">
              <div class="custom-form-field">
                <mat-form-field
                  class="without-search spot-dropdown-component"
                  appearance="none"
                >
                  <mat-select
                    [(ngModel)]="offerAdditionalCost.additionalCost"
                    (ngModelChange)="
                      additionalCostNameChanged(offerAdditionalCost);
                      onCostSelectionChange($event, j)
                    "
                    [disableOptionCentering]="true"
                    panelClass="spot-select-panel-container"
                    [compareWith]="compareObjects"
                  >
                    <mat-option
                      *ngFor="let option of additionalCostList"
                      [value]="option"
                    >
                      {{ option.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </td>
            <td class="text-left cell-dashed-border ">
              <div class="custom-form-field">
                <mat-form-field
                  class="without-search spot-dropdown-component"
                  appearance="none"
                >
                  <mat-select
                    [(ngModel)]="offerAdditionalCost.costType"
                    [disableOptionCentering]="true"
                    panelClass="spot-select-panel-container"
                    [compareWith]="compareObjects"
                  >
                    <mat-option
                      *ngFor="
                        let option of offerAdditionalCost.allowedCostTypes
                      "
                      [value]="option"
                    >
                      {{ option.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </td>
            <td>
              <div class="non-editable-container">
                <div class="non-editable-container-text-left">
                  {{
                    offerAdditionalCost.maxQuantity
                      ? quantityFormatValue(offerAdditionalCost.maxQuantity)
                      : ' '
                  }}
                </div>
                <div class="non-editable-container-text-right">
                  {{
                    offerAdditionalCost.maxQuantityUom
                      ? offerAdditionalCost.maxQuantityUom
                      : ''
                  }}
                </div>
              </div>
            </td>
            <td style="width: 275px" class="text-left cell-dashed-border ">
              <div class="dotted-container">
                <div style="width: 250px;">
                  <div class="split-field">
                    <mat-form-field
                      style="width: 33%"
                      class="without-search spot-dropdown-component"
                      appearance="none"
                    >
                      <mat-select
                        [(ngModel)]="offerAdditionalCost.currency"
                        [compareWith]="compareObjects"
                        disableRipple
                        [disableOptionCentering]="true"
                        [disabled]="true"
                        panelClass="spot-select-panel-container"
                      >
                        <mat-option
                          *ngFor="let option of currencyList"
                          [value]="option"
                          >{{ option.name }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field
                      class="without-search"
                      style="width: 33%;border: none;"
                      appearance="none"
                    >
                      <input
                        matInput
                        autocomplete="off"
                        priceFormat
                        [(ngModel)]="offerAdditionalCost.price"
                      />
                    </mat-form-field>
                    <mat-form-field
                      class="without-search spot-dropdown-component"
                      appearance="none"
                      style="width: 33%"
                    >
                      <mat-select
                        disableRipple
                        [disableOptionCentering]="true"
                        panelClass="spot-select-panel-container"
                        [(ngModel)]="offerAdditionalCost.priceUom"
                        [compareWith]="compareObjects"
                        [disabled]="
                          !additionalCostPriceUomEnabled(offerAdditionalCost)
                        "
                      >
                        <mat-option
                          *ngFor="let option of uomList"
                          [value]="option"
                          >{{ option.name }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </td>
            <td class="text-left cell-dashed-border" contenteditable="true">
              <mat-form-field appearance="none">
                <mat-select
                  [ngModel]="offerAdditionalCost.selectedApplicableForId"
                  (ngModelChange)="
                    offerAdditionalCost.selectedApplicableForId = $event;
                    onApplicableForChange($event, j)
                  "
                >
                  <mat-option
                    *ngFor="let applicableFor of applicableForItems"
                    [value]="applicableFor.id"
                  >
                    {{ applicableFor.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </td>
            <td class="text-left ">{{ offerAdditionalCost.extras }}</td>
            <td class="text-left ">{{ offerAdditionalCost.extraAmount }}</td>
            <td class="text-left">{{ offerAdditionalCost.totalAmount }}</td>
            <td class="text-left">{{ offerAdditionalCost.ratePerUom }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-spin-clockwise-fade"
>
</ngx-spinner>
