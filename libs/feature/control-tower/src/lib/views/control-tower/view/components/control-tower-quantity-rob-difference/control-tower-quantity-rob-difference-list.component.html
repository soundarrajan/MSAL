<shiptech-wunderbar>
  <div class="row" style="margin: 5px 0;">
    <div class="col-12 d-flex">
      <shiptech-presets-menu-dropdown></shiptech-presets-menu-dropdown>
      <app-filter-preferences
        appAgGridFilterPresets
        groupId="control-tower-quantity-rob-difference-v2-list-filter-presets"
        id="qc-report-list"
        (presetsLoaded)="gridViewModel.markServerSideDataSourceReady()"
      ></app-filter-preferences>
    </div>
    <!-- <div class="col-6">
      <div style="float:right">
        <shiptech-export-new
          [gridId]="'v2-list-grid-8'"
          [gridModel]="gridViewModel"
          [serverKeys]="invoiceListServerKeys"
        ></shiptech-export-new>
      </div>
    </div> -->
  </div>
</shiptech-wunderbar>

<p-messages></p-messages>

<!-- <button
  class="search-icon"
  appMasterSelectorTrigger
  [masterSelector]="masterSelector"
  #masterSelectorTrigger="masterSelectorTrigger"
  [header]="getHeaderNameSelector()"
>
  <div class="img">
    <ng-template cdkPortal #masterSelector="cdkPortal">
      <shiptech-shared-master-selector
        (selectedChange)="masterSelectorTrigger.close()"
        (shouldCloseModal)="masterSelectorTrigger.close()"
        [selectorType]="autocompleteOrders"
        [disabled]="false"
        [readonly]="false"
        [entityName]="'control-tower'"
        [entityId]="1"
        [vesselId]="1"
        [headerName]="getHeaderNameSelector()"
      ></shiptech-shared-master-selector>
    </ng-template>
  </div>
</button> -->

<div class="w-100 px-3 py-4  m-r-5 m-b-7" style="background: white;">
  <div class="row mb-2">
    <div class="col-12 d-flex p-t-4">
      <app-ag-filter-display [grid]="agGridAngular"></app-ag-filter-display>
    </div>
  </div>
  <ag-grid-angular
    #agGridAngular
    appAgGridFirstColumnLocked
    appAgGridFilterPresets
    appAgGridSizeToFit
    appAgGridClearAllFilters
    appExternalSearch
    appAgGridEmptyFilterOption
    #search="search-id"
    groupId="control-tower-quantity-rob-difference-v2-list-filter-presets"
    id="v2-list-grid-8"
    domLayout="normal"
    class="ag-theme-material ag-grid-v2 angular-v9 prod-details"
    style="height:calc( 100vh - 352px );"
    [gridOptions]="gridViewModel.gridOptions"
    (rowClicked)="onrowClicked($event)"
  >
  </ag-grid-angular>
  <div class="footer">
    <app-ag-footer-new
      [gridViewModel]="gridViewModel"
      [page]="gridViewModel.page"
      [size]="gridViewModel.pageSize"
      [count]="gridViewModel.totalItems"
      [singleGrid]="true"
      [doublePagination]="true"
      [maxSize]="7"
      [id]="'controlTower-quantitySupplyDiff'"
      [serverKeys]="controlTowerQuantityRobDifferenceListServerKeys"
      (pageChange)="onPageChange($event.page)"
    >
    </app-ag-footer-new>
  </div>
</div>

<ng-template
  [columnDef]="[gridViewModel.portCallCol]"
  appAgCellTemplate
  let-data="data"
  let-value="value"
>
  <a *ngIf="value && value?.id" (click)="openEditOrder(value.id)">{{
    value?.id
  }}</a>
</ng-template>
