
<div class="d-flex justify-content-between header-wrapper">
  <h2 mat-dialog-title class="m-b-0">
    Filters and Preferences
  </h2>
  <div class="right-actions">
    <button *ngIf="isEditing" class="action-button-blue" mat-button (click)="isEditing = false">Done</button>
    <button class="action-button-blue" mat-button *ngIf="!isEditing" (click)="enableEditing()">Edit</button>
    <button class="action-button-blue" mat-button (click)="updateAllFilters()">Save</button>
    <mat-icon matSuffix id="dialogCloseButton" class="float-right" (click)="cancelEditing()">close </mat-icon>
  </div>
</div>
<mat-dialog-content [ngClass]="isEditing ? 'isEditing' : '' ">
  <div id="available-filter-content">
    <mat-chip-list>
      <div *ngFor="let filter of filterItems">
        <!-- NOTE: Add track by -->
        <div
          *ngIf="!filter.isDefault && !filter.isClear"
          [matTooltip]="filter.name"
          [ngClass]="[filter.isActive && !isEditing ? 'chip-look-alike text-center' : ' chip-look-alike inactive-chip text-center']"
        >
          <div class="truncate-f85 text-center">
            <input
              matInput
              required
              type="text"
              class=""
              [ngClass]="{ 'text-ellipsis': !isEditing, 'text-underline': isEditing }"
              [(ngModel)]="filter.name"
              [readonly]="!isEditing"
              placeholder="{{ filter.name }}{{ filter.hasChanges ? '*' : '' }}"
            />
          </div>

          <div matSuffix *ngIf="!isEditing" class="chip-circle chip-icon" (click)="setPinned(filter.id)">
            <i *ngIf="filter.isPinned" class="fas fa-thumbtack aggrid-rotate-45"></i>
          </div>
          <div matSuffix *ngIf="isEditing" (click)="removeFilter(filter.id)" class="chip-circle chip-icon">
            <span class="delete-chip"></span>
          </div>
        </div>
      </div>
    </mat-chip-list>
    <div *ngIf="hasAvailableFilterItems">
      <h5 mat-dialog-title class="m-b-0">No Available Filters</h5>
    </div>
  </div>
</mat-dialog-content>

<ng-template #deleteFilter>
  <div id="deleteFilterPopup">
    <h2 mat-dialog-title class="m-b-0">
      Are you sure want to delete
      <mat-icon matSuffix id="dialogCloseButtonDl" (click)="deleteFilterDialog.close()" class="float-right cursor-pointer">close </mat-icon>
    </h2>
    <hr />
    <mat-dialog-content>
      <div id="filter-delete-confirmation">
        <mat-chip-list>
          <mat-chip
            class="chip-look-alike"
            [matTooltip]="filterToBeDeleted.name"
            [matTooltipShowDelay]="500"
            style="pointer-events:none;"
          >
            <div class="truncate-f85 text-center">
              {{ filterToBeDeleted.name }}
            </div>
            <div matSuffix class="chip-circle">
              <i *ngIf="filterToBeDeleted.isPinned" class="fas fa-thumbtack aggrid-rotate-45"></i>
            </div>
          </mat-chip>
        </mat-chip-list>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions>
      <button class="red-button" mat-button cdkFocusInitial (click)="removeFilter(filterToBeDeleted.id)">DELETE</button>
      <button class="blue-button" mat-button cdkFocusInitial (click)="deleteFilterDialog.close()">CANCEL</button>
    </mat-dialog-actions>
  </div>
</ng-template>
