<div class="igrid-container">
    <table>
        <thead>
            <tr>
                <th colspan="5" scope="colgroup" class="no-p">
                    <div class="header-title">
                        <span class="add-icon" matTooltip="Add counterparty in this location"
                            matTooltipClass="lightTooltip" [matMenuTriggerFor]="clickmenu"
                            #menuTrigger="matMenuTrigger"></span>
                        <mat-menu #clickmenu="matMenu" class="add-new-request-menu">
                            <div class="expansion-popup" style="margin: 20px 0px;">
                                <div class="select-product-container">
                                    <div class="col-md-12 header-container-product"
                                        (click)="$event.stopPropagation(); $event.preventDefault()">
                                        <div class="search-product-container col-md-10">
                                            <span class="search-product-lookup">
                                            </span>
                                            <input matInput placeholder="Search and select counterparty"
                                                class="search-product-input">
                                        </div>
                                        <div class="col-md-2">
                                            <span class="expand-img"></span>
                                        </div>
                                    </div>
                                    <table class="delivery-products-pop-up col-md-12 no-padding" mat-table
                                        (click)="$event.stopPropagation()">

                                        <ng-container matColumnDef="counterparty">
                                            <th mat-header-cell *matHeaderCellDef> Counterparty </th>
                                            <td mat-cell *matCellDef="let element">
                                                <mat-option [value]="element">
                                                    <mat-checkbox [value]="element" [(ngModel)]="element.selected">
                                                        {{element.counterparty}}
                                                    </mat-checkbox>
                                                </mat-option>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="blank">
                                            <th mat-header-cell *matHeaderCellDef></th>
                                            <td mat-cell *matCellDef="let element">
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row></tr>
                                        <!-- <tr mat-row *matRowDef="let row; columns: counterpartyColumns;"></tr> -->
                                    </table>
                                    <div class="proceed-div">
                                        <button mat-button class="mid-blue-button proceed-btn">Proceed</button>
                                    </div>
                                </div>
                            </div>
                        </mat-menu>
                        <div class="header-text">Counterparties</div>
                        <div class="header-count">16</div>
                    </div>
                    <div style="border-bottom: 3px solid #E0E1E4; margin: 10px -30px;"></div>
                    <div style="float:right;">
                        <span style="margin-left: 10px;" class="counterpartytype-icon type-seller"><i class="fas fa-circle"></i> <span class="text">Seller</span></span>
                        <span style="margin-left: 10px;" class="counterpartytype-icon type-broker"><i class="fas fa-circle"></i> <span class="text">Broker</span></span>
                        <span style="margin-left: 10px;" class="counterpartytype-icon type-physicalsupplier"><i class="fas fa-circle"></i> <span class="text">Physical Supplier</span></span>
                    </div>
                </th>
                <th colspan="0" scope="colgroup" class="no-p">
                    <div class="resize-grid-header" style="position: relative;">
                        <!-- <div class="border-line"></div> -->
                        <div class="options" style="padding-top: 5px;padding-bottom:10px; ">
                            <div class="checkBox w-100" style="padding-top:0px;">
                                Total Offer
                            </div>
                        </div>
                        <div class="label" matTooltip="No. of Products" matTooltipClass="lightTooltip">
                            <div class="label-content" style="width:95%;">
                                <div class="label-element w-100">
                                    <div class="title">No. of Products</div>
                                    <div class="value">3</div>
                                </div>

                            </div>
                        </div>
                    </div>
                </th>
                <th [attr.colspan]="pg1_col_span" scope="colgroup" class="no-p">
                    <!-- Product 1 -->
                    <div class="resize-grid-header">
                        <div class="options">
                            <div class="checkBox">
                                <mat-checkbox class="noborder" [checked]='true'>DMA 0.1%</mat-checkbox>
                            </div>
                            <div class="optionsText">
                                <div class="qty" matTooltip="Min - Max quantities" matTooltipClass="lightTooltip">
                                    <span class="title">Qty:</span>
                                    <span class="value">600/800 MT</span>
                                </div>
                                <div class="arrow" matTooltip="Market Price history" matTooltipClass="lightTooltip" (click)="pricinghistorypopup()">
                                    <span class="title">ICE Brent</span>
                                    <span class="image"></span>
                                </div>
                                <div class="offer" matTooltip="Offer price history" matTooltipClass="lightTooltip" (click)="offerpricehistorypopup()">
                                    <span class="title">Offer</span>
                                    <span class="image"></span>
                                </div>
                            </div>
                        </div>
                        <div class="label">
                            <div class="label-content">
                                <div class="label-element">
                                    <div class="title">Closure</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element red">
                                    <div class="title">Perf/BM</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element dashed" matTooltip="Live prices"
                                    matTooltipClass="lightTooltip">
                                    <div class="title">Live price</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element green">
                                    <div class="title">Target</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element bestcontract" (click)="availabletermcontractpopup()">
                                    <div class="title">Best Contract
                                        <span class="eye-icon"></span>
                                    </div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                            </div>
                            <div class="resize-icon">
                                <div class="img resizeIcons" [ngClass]="{'expand':isExpand}" (click)="addcolmn()">
                                </div>
                            </div>
                        </div>
                    </div>
                </th>
                <th [attr.colspan]="pg2_col_span" scope="colgroup" class="no-p">
                    <!-- Product 2 -->
                    <div class="resize-grid-header">
                        <div class="options">
                            <div class="checkBox">
                                <mat-checkbox class="noborder" [checked]='true'>DMA 0.1%</mat-checkbox>
                            </div>
                            <div class="optionsText">
                                <div class="qty" matTooltip="Min - Max quantities" matTooltipClass="lightTooltip">
                                    <span class="title">Qty:</span>
                                    <span class="value">600/800 MT</span>
                                </div>
                                <div class="arrow" matTooltip="Market Price history" matTooltipClass="lightTooltip">
                                    <span class="title">ICE Brent</span>
                                    <span class="image"></span>
                                </div>
                                <div class="offer" matTooltip="Offer price history" matTooltipClass="lightTooltip">
                                    <span class="title">Offer</span>
                                    <span class="image"></span>
                                </div>
                            </div>
                        </div>
                        <div class="label">
                            <div class="label-content">
                                <div class="label-element">
                                    <div class="title">Closure</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element red">
                                    <div class="title">Perf/BM</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element dashed" matTooltip="Live prices"
                                    matTooltipClass="lightTooltip">
                                    <div class="title">Live price</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element green">
                                    <div class="title">Target</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element bestcontract">
                                    <div class="title">Best Contract
                                        <span class="eye-icon"></span>
                                    </div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                            </div>
                            <div class="resize-icon">
                                <div class="img resizeIcons" [ngClass]="{'expand':isExpand}" (click)="addcolmn()">
                                </div>
                            </div>
                        </div>
                    </div>
                </th>
                <th [attr.colspan]="pg3_col_span" scope="colgroup" class="no-p">
                    <!-- Product 2 -->
                    <div class="resize-grid-header">
                        <div class="options">
                            <div class="checkBox">
                                <mat-checkbox class="noborder" [checked]='true'>DMA 0.1%</mat-checkbox>
                            </div>
                            <div class="optionsText">
                                <div class="qty" matTooltip="Min - Max quantities" matTooltipClass="lightTooltip">
                                    <span class="title">Qty:</span>
                                    <span class="value">600/800 MT</span>
                                </div>
                                <div class="arrow" matTooltip="Market Price history" matTooltipClass="lightTooltip">
                                    <span class="title">ICE Brent</span>
                                    <span class="image"></span>
                                </div>
                                <div class="offer" matTooltip="Offer price history" matTooltipClass="lightTooltip">
                                    <span class="title">Offer</span>
                                    <span class="image"></span>
                                </div>
                            </div>
                        </div>
                        <div class="label">
                            <div class="label-content">
                                <div class="label-element">
                                    <div class="title">Closure</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element red">
                                    <div class="title">Perf/BM</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element dashed" matTooltip="Live prices"
                                    matTooltipClass="lightTooltip">
                                    <div class="title">Live price</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element green">
                                    <div class="title">Target</div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                                <div class="label-element bestcontract">
                                    <div class="title">Best Contract
                                        <span class="eye-icon"></span>
                                    </div>
                                    <div class="value" contenteditable="true">$559.00</div>
                                </div>
                            </div>
                            <div class="resize-icon">
                                <div class="img resizeIcons" [ngClass]="{'expand':isExpand}" (click)="addcolmn()">
                                </div>
                            </div>
                        </div>
                    </div>
                </th>
            </tr>
            <tr class="h-shadow">
                <th>
                    <ng-container *ngTemplateOutlet="headerCheckbox"></ng-container>
                </th>
                <th resizable *ngFor="let col of coln;let i=index" class="h-content">
                    {{col}}</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let row of rowData;let j=index" ngClass="rating" [ngClass]="{'fixed-side':j>2}">
                <td>
                    <mat-checkbox class="tableCheckBox" [checked]="row.check" (change)="rowChecked($event.checked,j)">
                    </mat-checkbox>
                </td>
                <td>
                    <span class="counterpartytype-icon type-physicalsupplier"*ngIf="row.counterpartytype=='physicalsupplier'"><i class="fas fa-circle"></i></span>
                    <span class="counterpartytype-icon type-broker"*ngIf="row.counterpartytype=='broker'"><i class="fas fa-circle"></i></span>
                    <span class="counterpartytype-icon type-seller"*ngIf="row.counterpartytype=='seller'"><i class="fas fa-circle"></i></span>
                    <span class="info-flag" *ngIf="row.infoIcon=='Yes'" matTooltipClass="darkTooltip" matTooltip="Temporary suspended counterparty" matTooltipClass="lightTooltip"></span>
                    {{row.name}}
                    <span class="mail-icon mail-active" (click)="openEmailPreview()" *ngIf="row.mail=='mail-active'" matTooltip="View preview email" matTooltipClass="lightTooltip">a</span>
                    <span class="mail-icon mail-none" (click)="openEmailPreview()" *ngIf="row.mail=='mail-inactive'" matTooltipClass="" matTooltip="">i</span>
                    <span class="mail-icon mail-none" (click)="openEmailPreview()" *ngIf="row.mail=='mail-none'" matTooltipClass="" matTooltip="">n</span>
                    <span class="info-comment" matTooltip="View supplier comments" matTooltipClass="lightTooltip" (click)="suppliercommentspopup()" *ngIf="row.commentIcon=='Yes'"></span>
                    <span class="info-comment-inactive" (click)="suppliercommentspopup()" *ngIf="row.commentIcon=='No'" matTooltipClass="" matTooltip=""></span>
        
                </td>
                <td class=""><div class="rating-chip">{{row.genRating}} <span class="star"></span> {{row.genPrice}}</div></td>
                <td class=""><div class="rating-chip">{{row.portRating}} <span class="star"></span> {{row.portPrice}}</div></td>
                <td style="border-right: 2px solid #ccc!important;">{{row.phySupplier}}</td>
                <td style="border-right: 2px solid #ccc!important;">
                    <div class="dollarButton"></div>{{row.totalOffer}}
                </td>
                <td>
                    <mat-checkbox class="tableCheckBox" [checked]="row.check1"></mat-checkbox>
                </td>
                <td class="editable-cell">
                    <div class="price-calc">
                        <div id="custom-form-field" style="display:relative;" class="priceCalculated">
                        <mat-form-field class="without-search currency-select-trigger" appearance="none" [formGroup]="myFormGroup">
                            <!-- <mat-label>Select Field</mat-label> -->
                            <mat-select disableOptionCentering 
                            [(ngModel)]="select"
                            formControlName="frequency" panelClass="currencyselecttrigger"
                            >
                            <mat-select-trigger overlayPanelClass="123class">
                                {{myFormGroup.controls['frequency'].value}}
                            </mat-select-trigger>
                            <mat-option [disabled]>Change Currency </mat-option>
                            <mat-option class="currency-mat-select" *ngFor="let frequency of frequencyArr" [value]="frequency.key">
                              <span> <mat-radio-button>{{ frequency.abbriviation}}</mat-radio-button></span>
                            </mat-option>
                            </mat-select>
                        </mat-form-field>
                        </div>
                        <input class="inputField" autocomplete="off" name="inputField" 
                        spellcheck="false" type='text' style="display:inline">
                    </div>
                </td>
                <td>{{row.tPr}}</td>
                <td>{{row.amt}}</td>
                <td style="border-right: 2px solid #ccc!important;">{{row.diff}}</td>
                <td>{{row.mj}}</td>
                <td>{{row.tco}}</td>
                <td style="border-right: 2px solid #ccc!important;">{{row.ediff}}</td>
            </tr>
        </tbody>
    </table>
</div>
<ng-template #headerCheckbox>
    <mat-checkbox class="tableCheckBox" [checked]="allComplete" (change)="setAll($event.checked)"></mat-checkbox>
</ng-template>