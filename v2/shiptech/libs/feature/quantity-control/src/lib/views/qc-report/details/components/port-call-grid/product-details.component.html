<ag-grid-angular
  appAgGridFirstColumnLocked
  appAgGridSizeToFit
  [gridOptions]="viewModel.gridViewModel.gridOptions"
  [rowData]="viewModel.productTypes$ | async"
  class="ag-theme-balham shiptech-blue-group-header"
  id="quantity-control-product-details-grid">
</ag-grid-angular>


<ng-template [columnDef]="viewModel.gridViewModel.bdnDeliveredQuantityCol"
             appAgCellTemplate
             let-model="data.model" let-value="valueFormatted">
  <ng-container>
    <div fxLayout="row" fxLayoutAlign="center center">
      <a href="#">{{value}}</a>
    </div>
  </ng-container>
</ng-template>

<ng-template [columnDef]="[
              viewModel.gridViewModel.robBeforeDeliveryColGroup,
              viewModel.gridViewModel.robAfterDeliveryColGroup,
              viewModel.gridViewModel.deliveredQuantityColGroup]"
             agGroupHeaderTemplate
             let-groupDef="groupDef" let-title="title">
  <div class="ag-header-group-cell-label p-2" ref="agContainer">
    <div class="row flex-vertical-center" style="width: 100%">
      <div class="col-10">
        <span class="ag-header-group-text" ref="agLabel">{{ title }}</span>
      </div>
      <div class="col-2">
        <shiptech-uom-selector (selectionChanged)="viewModel.gridViewModel.switchSelectedUom(groupDef.groupId, $event)"
                               [selectedUom]="viewModel.gridViewModel.getSelectedUomValue$(groupDef.groupId) | async"
                               [disabled]="isBusy$ | async"
                               [uoms]="viewModel.uoms$ | async"></shiptech-uom-selector>
      </div>
    </div>
  </div>
</ng-template>


<ng-template [columnDef]="[
              viewModel.gridViewModel.logBookBeforeDeliveryCol,
              viewModel.gridViewModel.measuredRobBeforeDeliveryCol,
              viewModel.gridViewModel.measuredDeliveredQuantityCol,
              viewModel.gridViewModel.logBookAfterDeliveryCol,
              viewModel.gridViewModel.measuredRobAfterDeliveryCol]"
             appAgCellTemplate let-column="column" let-model="data" let-value="valueFormatted">
    <div fxLayout="row" fxLayoutAlign="center center">
      <p-spinner (ngModelChange)="viewModel.updateProductType(column, model, $event)"
                 disable-keys-spin
                 tenant-format="quantity"
                 [disabled]="isBusy$ | async"
                 [ngModelOptions]="{updateOn: 'blur'}"
                 [ngModel]="value"></p-spinner>
    </div>
</ng-template>
