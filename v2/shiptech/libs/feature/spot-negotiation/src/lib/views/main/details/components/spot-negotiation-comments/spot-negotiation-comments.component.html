<div class="spot-nego-comments">
    <div class="grid-in-accordion">
        <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
            <mat-panel-title>
                    <div class="accordion-detail">
                        <div class="open-close-arrow"></div>
                        <span class="panel-title m-l-9">
                            <span>Comments:</span>
                            <span>Req 12321 - Okee Lilo</span>
                        </span>
                        <div class="comments-type" (click)="$event.stopPropagation();">
                            <span class="circle internal"></span>
                            <span class="label internal">Internal Comments</span>
                            <span class="circle external"></span>
                            <span class="label external">External Comments</span>
                            <span class="copy-btn" matTooltip="Duplicate Comments" matTooltipClass="blueTooltip" (click)="copyComments()">copy</span>
                        </div>
                    </div>
            </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-template matExpansionPanelContent>
                <div class="row" style="padding: 0px 4px;">
                    <div class="col-md-3 spot-comments-section" style="padding: unset !important;">
                        <div style="overflow-y: scroll;">
                            <div class="search-panel internal">
                                <span class="search-panel-text">Internal</span>
                                <span class="search-icon"></span>
                            </div>
                            <div class="comments-panel">
                                <div class="display-comment" *ngFor="let item of commentsJson[reqIndex]?.internalComments; let i=index;">
                                    <div class="row">
                                        <div style="flex:0 0 5%; margin: 8px;">
                                            <div [ngClass]="item.selected ? 'selected' : 'comment-user'" (click)="selectItem(0,i);">{{item.placeholder}}</div>
                                        </div>
                                        <div style="flex:0 0 80%; margin: 5px -10px;">
                                            <div class="row">
                                                <div class="name col-5 plr0" matTooltip="{{item.name}}" [matTooltipShowDelay]="500" (click)="selectItem(0,i);">
                                                  <div class="truncate-180">{{item.name}}</div>
                                                </div>
                                                <div class="col-7 pl0 pr10 text-right">
                                                <div class="date display-inline " matTooltip="{{item.date}} {{item.time}}" [matTooltipShowDelay]="500">
                                                    {{item.date}} {{item.time}}    
                                                </div>
                                                <div class="display-inline" [matMenuTriggerFor]="clickmenu" #menuTrigger="matMenuTrigger">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                                </div>
                                                <mat-menu #clickmenu="matMenu" class="more-options-menu-panel" xPosition="after"
                                                    style="position: relative;bottom: 15px;left: 66px;min-height: unset !important;">
                                                    <div (click)="deleteInternalComment(i)">
                                                        <div class="more-options-menu-inv no-border p-lr-0">
                                                            <div *ngFor="let item of menuOptions" style="padding: 10px 20px;">
                                                                <span>
                                                                    <img class="p-r-10 mright-5" [src]="item.icon" width="22" [alt]="item.name">
                                                                </span>
                                                                <span class="item-name" style="color: #ffffff !important;">{{item.name}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </mat-menu>                                            
                                            </div>
                                            <div class="row" style="padding-top: 5px;" (click)="selectItem(0,i);">
                                                <div class="comment">
                                                  {{item.comment}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="new-comments">
                            <div class="enter-new-comment">
                                <input placeholder="Type your comments here" matInput #newInternalInput type="text" [(ngModel)]="newInternalComment" (keyup.enter)="addInternalComment(newInternalInput.value)" style="height: 50px;">
                            </div>
                            <!-- <div class="add-new-comment">
                                <span class="add-comment-icon" (click)="addInternalComment(newInternalInput.value)"></span>
                            </div> -->
                        </div>
                    </div>
                    <div class="col-md-3 spot-comments-section dark-line-seperator" style="padding: unset !important;">
                        <div style="overflow-y: scroll;">
                            <div class="search-panel internal">
                                <span class="search-panel-text">Performance</span>
                                <span class="search-icon"></span>
                            </div>
                            <div class="comments-panel">
                                <div class="display-comment" *ngFor="let item of commentsJson[reqIndex]?.performanceComments;let i=index;">
                                    <div class="row">
                                        <div style="flex:0 0 5%; margin: 8px;">
                                            <div [ngClass]="item.selected ? 'selected' : 'comment-user'" (click)="selectItem(1,i);">{{item.placeholder}}</div>
                                        </div>
                                        <div style="flex:0 0 80%; margin: 5px -10px;">
                                            <div class="row">
                                                <div class=" name col-5 plr0" matTooltip="{{item.name}}" [matTooltipShowDelay]="500" (click)="selectItem(1,i);">
                                                  <div class="truncate-180">{{item.name}}</div>
                                                </div>
                                                <div class="col-7 pl0 pr10 text-right">
                                                <div class="date display-inline" matTooltip="{{item.date}} {{item.time}}" [matTooltipShowDelay]="500">
                                                    {{item.date}} {{item.time}}    
                                                </div>
                                                <div class="display-inline" [matMenuTriggerFor]="clickmenu" #menuTrigger="matMenuTrigger">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                                </div>
                                                <mat-menu #clickmenu="matMenu" class="more-options-menu-panel" xPosition="after"
                                                    style="position: relative;bottom: 15px;left: 66px;min-height: unset !important;">
                                                    <div (click)="deletePerformanceComment(i)">
                                                        <div class="more-options-menu-inv no-border p-lr-0">
                                                            <div *ngFor="let item of menuOptions" style="padding: 10px 20px;">
                                                                <span>
                                                                    <img class="p-r-10 mright-5" [src]="item.icon" width="22" [alt]="item.name">
                                                                </span>
                                                                <span class="item-name" style="color: #ffffff !important;">{{item.name}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </mat-menu>
                                            </div>
                                            <div class="row" style="padding-top: 5px;" (click)="selectItem(1,i);">
                                                <div class="comment">
                                                  {{item.comment}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="new-comments">
                            <div class="enter-new-comment">
                                <input placeholder="Type your comments here" matInput #newPerformanceInput type="text" [(ngModel)]="newPerformanceComment" (keyup.enter)="addPerformanceComment(newPerformanceInput.value)" style="height: 50px;">
                            </div>
                            <!-- <div class="add-new-comment">
                                <span class="add-comment-icon" (click)="addPerformanceComment(newPerformanceInput.value)"></span>
                            </div> -->
                        </div>
                    </div>   
                    <div class="col-md-3 spot-comments-section" style="padding: unset !important;">
                        <div style="overflow-y: scroll;">
                            <div class="search-panel external">
                                <span class="search-panel-text">Supplier</span>
                                <span class="search-icon"></span>
                            </div>
                            <div class="comments-panel">
                                <div class="display-comment" *ngFor="let item of commentsJson[reqIndex]?.suppliersComments;let i=index;">
                                    <div class="row">
                                        <div style="flex:0 0 5%; margin: 8px;">
                                            <div [ngClass]="item.selected ? 'selected' : 'comment-user'" (click)="selectItem(2,i);">{{item.placeholder}}</div>
                                        </div>
                                        <div style="flex:0 0 80%; margin: 5px -10px;">
                                            <div class="row">
                                                <div class="name col-5 plr0" matTooltip="{{item.name}}" [matTooltipShowDelay]="500" (click)="selectItem(2,i);">
                                                  <div class="truncate-180">{{item.name}}</div>
                                                </div>
                                                <div class="col-7 pl0 pr10 text-right">
                                                <div class="date display-inline" matTooltip="{{item.date}} {{item.time}}" [matTooltipShowDelay]="500">
                                                    {{item.date}} {{item.time}}    
                                                </div>
                                                <div class="display-inline" [matMenuTriggerFor]="clickmenu" #menuTrigger="matMenuTrigger">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                                </div>
                                                <mat-menu #clickmenu="matMenu" class="more-options-menu-panel" xPosition="after"
                                                    style="position: relative;bottom: 15px;left: 66px;min-height: unset !important;">
                                                    <div (click)="deleteSupplierComment(i)">
                                                        <div class="more-options-menu-inv no-border p-lr-0">
                                                            <div *ngFor="let item of menuOptions" style="padding: 10px 20px;">
                                                                <span>
                                                                    <img class="p-r-10 mright-5" [src]="item.icon" width="22" [alt]="item.name">
                                                                </span>
                                                                <span class="item-name" style="color: #ffffff !important;">{{item.name}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </mat-menu>
                                            </div>
                                            <div class="row" style="padding-top: 5px;" (click)="selectItem(2,i);">
                                                <div class="comment">
                                                  {{item.comment}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="new-comments">
                            <div class="enter-new-comment">
                                <input placeholder="Type your comments here" matInput #newSupplierInput type="text" [(ngModel)]="newSupplierComment" (keyup.enter)="addSuppliersComment(newSupplierInput.value)" style="height: 50px;">
                            </div>
                            <!-- <div class="add-new-comment">
                                <span class="add-comment-icon" (click)="addSuppliersComment(newSupplierInput.value)"></span>
                            </div> -->
                        </div>
                    </div>                                                      
                    <div class="col-md-3 spot-comments-section" style="padding: unset !important;">
                        <div style="overflow-y: scroll;">
                            <div class="search-panel external">
                                <span class="search-panel-text">Vessel & Agents</span>
                                <span class="search-icon"></span>
                            </div>
                            <div class="comments-panel">
                                <div class="display-comment" *ngFor="let item of commentsJson[reqIndex]?.vesselsAgentsComments; let i=index;">
                                    <div class="row">
                                        <div style="flex:0 0 5%; margin: 8px;">
                                            <div [ngClass]="item.selected ? 'selected' : 'comment-user'" (click)="selectItem(3,i);">{{item.placeholder}}</div>
                                        </div>
                                        <div style="flex:0 0 80%; margin: 5px -10px;">
                                            <div class="row">
                                                <div class="name col-5 plr0" matTooltip="{{item.name}}" [matTooltipShowDelay]="500" (click)="selectItem(3,i);">
                                                  <div class="truncate-180">{{item.name}}</div>
                                                </div>
                                                <div class="col-7 pl0 pr10 text-right">
                                                <div class="date display-inline " matTooltip="{{item.date}} {{item.time}}" [matTooltipShowDelay]="500">
                                                    {{item.date}} {{item.time}}    
                                                </div>
                                                <div class="display-inline" [matMenuTriggerFor]="clickmenu" #menuTrigger="matMenuTrigger">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                                </div>
                                                <mat-menu #clickmenu="matMenu" class="more-options-menu-panel" xPosition="after"
                                                    style="position: relative;bottom: 15px;left: 66px;min-height: unset !important;">
                                                    <div (click)="deleteVesselComment(i)">
                                                        <div class="more-options-menu-inv no-border p-lr-0">
                                                            <div *ngFor="let item of menuOptions" style="padding: 10px 20px;">
                                                                <span>
                                                                    <img class="p-r-10 mright-5" [src]="item.icon" width="22" [alt]="item.name">
                                                                </span>
                                                                <span class="item-name" style="color: #ffffff !important;">{{item.name}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </mat-menu>                                            
                                            </div>
                                            <div class="row" style="padding-top: 5px;" (click)="selectItem(3,i);">
                                                <div class="comment">
                                                  {{item.comment}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="new-comments">
                            <div class="enter-new-comment">
                                <input placeholder="Type your comments here" matInput #newVesselInput type="text" [(ngModel)]="newVesselComment" (keyup.enter)="addVesselComment(newVesselInput.value)" style="height: 50px;">
                            </div>
                            <!-- <div class="add-new-comment">
                                <span class="add-comment-icon" (click)="addVesselComment(newVesselInput.value)"></span>
                            </div> -->
                        </div>
                    </div>
                </div>
            </ng-template>
        </mat-expansion-panel>
    </div>
</div>