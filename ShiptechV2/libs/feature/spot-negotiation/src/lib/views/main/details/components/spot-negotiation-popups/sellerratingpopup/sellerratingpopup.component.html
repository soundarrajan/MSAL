<div class="sellerrating-popup" >
  <div class="spot-popup-header-container"><div class="spot-nego-title">Seller Rating</div>
    <div class="spot-dialog-title-right">
      <div class="supplierName">Supplier Name:<span class="value"> {{counterpartyName}} </span></div>
      <span class="close-icon" style="cursor:pointer;" (click)="closeDialog()" [mat-dialog-close]="true"></span>
      </div>
  </div>
  <hr class="hr-line">
  <div>
  <div class="spot-nego-comments popup-scroll pl15 pr15" >
      <div class="grid-in-accordion">
        <div [hidden]="!specificRating? true : false">
          <mat-expansion-panel [expanded]="popupType=='portRating'? true : false" class="sellerrating-expansion-panel">
              <mat-expansion-panel-header>
              <mat-panel-title>
                      <div class="accordion-detail" style="margin-top: 2px;">
                          <div class="open-close-arrow" style="margin-bottom: 2px"></div>
                          <span class="panel-title m-l-9">
                              <span>Supplier Rating at {{locationName}}</span>
                              <span class="seller-rating-chip" style="width: 55px; height: 20px; margin-bottom: 5px">
                                <span class="mr0" *ngIf="specificRating">&nbsp;&nbsp;{{specificRating}} <i class="fas fa-star star-chip"></i></span>
                                <span class="mr0" *ngIf="!specificRating">NA</span>
                              </span>
                          </span>
                          <div class="comments-type" (click)="$event.stopPropagation();">                                                   </div>
                      </div>
              </mat-panel-title>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent>
                <div style="max-height:427px; overflow-y:scroll; overflow-x:hidden">
                  <div *ngFor="let items of specificPortRatingData">
                    <div class="row second-header"  style="padding: 0px 4px; justify-content: space-between;">
                        <div class="col-7 bold-text" style="padding-left: 32px;">{{items.categoriesName | htmlDecodeReadonly}}</div>
                        <div class="col-5 text-right" style="padding-right: 1.4vw;" >
                            <span class="unbold-text">Rated by </span>
                            <span class="bold-text">{{items.ratedBy}}</span>
                            <span class="unbold-text"> on </span>
                            <span class="bold-text"> {{formatDate(items.createdOn)}}</span>
                            </div>
                       </div>
                    <div class="row" *ngFor="let item of items.details; let i = index">
                        <span class="rating-star align-center" style="display: inline-flex; width: 100%;">
                            <span class="w-50"  style="padding-left: 15px;" >{{i+1}}. {{item.name | htmlDecodeReadonly}}</span>
                            <div class="rate l-h-46" *ngIf="item.rating != null">
                              <star-rating value="{{item.rating}}" [totalstars]='5' checkedcolor="#364150" uncheckedcolor="#EAEAEA" size="3em" readonly="true"></star-rating>
                            </div>
                            <div class="rate l-h-46" *ngIf="item.rating == null">
                            <span  >{{item.comments}}</span>
                          </div>
                          <div class="rate l-h-46" *ngIf="item.rating == null && item.comments == null">
                            <span>NIL</span>
                          </div>
                        </span>
                    </div>
                  </div>
                </div>
              </ng-template>
          </mat-expansion-panel>
        </div>
        <div [hidden]="!allocationRating ? true : false">
          <mat-expansion-panel [expanded]="popupType=='genRating'? true : false" class="sellerrating-expansion-panel">
              <mat-expansion-panel-header>
              <mat-panel-title>
                      <div class="accordion-detail" style="margin-top: 2px;">
                          <div class="open-close-arrow" style="margin-bottom: 2px"></div>
                          <span class="panel-title m-l-9">
                              <span>Supplier General Rating</span>
                              <span class="seller-rating-chip" style="align-items: center; width: 55px; height: 20px; margin-bottom: 5px">
                                  <span class="mr0" *ngIf="allocationRating">&nbsp;&nbsp;{{allocationRating}} <i class="fas fa-star star-chip"></i></span>
                                  <span class="mr0" *ngIf="!allocationRating">NA</span>
                                 </span>
                          </span>
                          <div class="comments-type" (click)="$event.stopPropagation();">                                                   </div>
                      </div>
              </mat-panel-title>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent >
                <div style="max-height: 426px; overflow-y:scroll; overflow-x:hidden">
                  <div *ngFor="let items of allLocationRatingData">
                    <div class="row second-header" style="padding: 0px 4px; justify-content: space-between;">
                        <div class="col-7 bold-text"  style="padding-left: 32px;">{{items.categoriesName | htmlDecodeReadonly}}</div>
                        <div class="col-5 text-right"  style="padding-right: 1.4vw;">
                            <span class="unbold-text">Rated by </span>
                            <span class="bold-text">{{items.ratedBy}}</span>
                            <span class="unbold-text"> on </span>
                            <span class="bold-text"> {{formatDate(items.createdOn)}}</span>
                            </div>
                    </div>
                    <div class="row"  *ngFor="let item of items.details; let i = index">
                        <span class="rating-star align-center" style="display: inline-flex; width: 100%;">
                            <span class="w-50" style="padding-left: 15px; padding-top: 15px;" >{{i+1}}. {{item.name | htmlDecodeReadonly}}</span>
                            <div class="rate l-h-46" *ngIf="item.rating != null">
                              <star-rating value="{{item.rating}}" [totalstars]='5' checkedcolor="#364150" uncheckedcolor="#EAEAEA" size="3em" readonly="true"></star-rating>
                            </div>
                            <div class="rate l-h-46" *ngIf="item.rating == null">
                            <span  >{{item.comments}}</span> 
                          </div>
                          <div class="rate l-h-46" *ngIf="item.rating == null && item.comments == null">
                            <span  >NIL</span>
                          </div>
                        </span>
                    </div>
                </div>
              </div>
                  
              </ng-template>
          </mat-expansion-panel>
        </div>
      </div>
    </div>
  </div>
  </div>

  <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise-fade">
  </ngx-spinner>
