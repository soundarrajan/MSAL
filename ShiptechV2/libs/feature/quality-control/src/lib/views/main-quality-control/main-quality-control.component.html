<shiptech-wunderbar>
  <div class="col-md-12 d-flex" style="margin: 5px 0;">
    <shiptech-presets-menu-dropdown></shiptech-presets-menu-dropdown>
    <app-filter-preferences
      id="qualityControlModule"
      appAgGridFilterPresets
      groupId="quantityControlmain"
      screenId="Main"
    ></app-filter-preferences>
  </div>
</shiptech-wunderbar>

<div class="w-100 px-3 py-4" style="background: white;">
  <div class="row mb-2">
    <div class="col-md-6">
      <app-page-size-selector
        (selectedOptionChange)="onPageSizeChange($event)"
        [options]="gridViewModel.pageSizeOptions"
        [selectedOption]="gridViewModel.pageSize">
      </app-page-size-selector>
    </div>
    <div class="col-md-6">
      <shiptech-search-box [placeholder]="'Search something'" AgGridExternalSearch gridId="quantityControlGrid"
                           style="float: right"></shiptech-search-box>
    </div>
  </div>

  <ag-grid-angular
    appAgGridFilterPresets
    appAgGridFirstColumnLocked
    appAgGridSizeToFit
    appDeselectFiltredRows
    AgGridExternalSearch
    [onSearch]="gridViewModel.onSearch.bind(gridViewModel)"
    groupId="quantityControlmain"
    id="quantityControlGrid"
    class="ag-theme-balham"
    [gridOptions]="gridViewModel.gridOptions">
  </ag-grid-angular>

  <div class="row mt-2">
    <div class="col-md-6">
      Showing {{((gridViewModel.page - 1) * gridViewModel.pageSize) + 1}}
      to {{gridViewModel.page * gridViewModel.pageSize}} of {{gridViewModel.totalItems}} entries
    </div>
    <div class="col-md-6">
      <div style="float:right">
        Page
        <app-ag-paging style="width: 150px;"
                       [pagerLeftArrowIcon]="'fa fa-chevron-left'"
                       [pagerRightArrowIcon]="'fa fa-chevron-right'"
                       [count]="gridViewModel.totalItems"
                       [page]="gridViewModel.page"
                       [size]="gridViewModel.pageSize"
                       (change)="onPageChange($event.page)">
        </app-ag-paging>
        of {{gridViewModel.totalItems / gridViewModel.pageSize}}
      </div>
    </div>
  </div>
</div>


<ng-template appTemplateRenderer [columnDef]="[gridViewModel.requestNameCol]" let-value="value" let-data="data">
  <ng-container>
    <a href="{{'/#/edit-request/448' + value}}">{{value}}</a>
  </ng-container>
</ng-template>

<ng-template appTemplateRenderer [columnDef]="[gridViewModel.requestGroupIdCol]" let-value="value" let-data="data">
  <ng-container>
    <a href="{{'/#/group-of-requests/' + value}}">{{value}}</a>
  </ng-container>
</ng-template>

<ng-template appTemplateRenderer [columnDef]="[gridViewModel.editCol]" let-value="value" let-data="data">
  <ng-container>
    <a href="#"><i class="fa fa-pencil"></i></a>
  </ng-container>
</ng-template>

<ng-template appTemplateRenderer [columnDef]="[gridViewModel.requestStatusCol, gridViewModel.productStatusCol]"
             let-value="value" let-data="data">
  <ng-container>
    <div class="requestStatus">
      <div [ngClass]="value">{{value}}</div>
    </div>
  </ng-container>
</ng-template>

<ng-template appTemplateRenderer
             [columnDef]="[
               gridViewModel.requestDateCol,
               gridViewModel.etaCol,
               gridViewModel.createdOnCol,
               gridViewModel.lastModifiedOnCol,
               gridViewModel.etbCol,
               gridViewModel.etdCol
             ]"
             let-value="value" let-data="data">
  <ng-container>
    {{value | date: 'short'}}
  </ng-container>
</ng-template>
