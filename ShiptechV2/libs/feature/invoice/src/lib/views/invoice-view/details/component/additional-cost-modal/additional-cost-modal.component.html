<div>
    <table class="product-additional-costs-table table table-stripped table-hover" style="width:100%">
      <thead>
        <tr>
          <td class="padding" style="width: 30px;">
            <a class="add-icon" (click)="addNewAdditionalCostLine()"></a>
          </td>
          <td class="padding" style="width:15%">
            <b>Item</b>
          </td>
          <td class="padding" style="width:15%">
            <b>Cost Type</b>
          </td>
          <td class="padding" style="width:30%">
            <b>% of</b>
          </td>
          <td class="padding" style="width:30%">
            <b>Inv. Qty.</b>
          </td>
          <td class="padding" style="width:40%">
            <b>Inv. Rate</b>
          </td>
          <td class="padding" style="width:30%">
            <b>Amount</b>
          </td>
          <td class="padding" style="width:15%">
            <b>Extra (%)</b>
          </td>
          <td class="padding" style="width:15%">
            <b>Extra Amount</b>
          </td>
          <td class="padding" style="width:15%">
            <b>Total Amount</b>
          </td>
          <td class="padding blue-bg" style="width:30%">
            <b>BDN Qty</b>
          </td>
          <td class="padding blue-bg" style="width:45%">
            <b>Est. Rate</b>
          </td>
          <td class="padding blue-bg" style="width:30%">
            <b>Amount</b>
          </td>
          <td class="padding blue-bg" style="width:15%">
            <b>Extra (%)</b>
          </td>
          <td class="padding blue-bg" style="width:15%">
            <b>Extra Amount</b>
          </td>
          <td class="padding blue-bg" style="width:15%">
            <b>Total Amount</b>
          </td>
          <td class="padding" style="width:15%">
            <b>Diff.</b>
          </td>
        </tr>
      </thead>
      <tbody>
          <ng-container *ngFor="let costs of additionalCost;let i= index;">
            <tr *ngIf="!costs.isDeleted">              
              <td class="padding" style="padding-left: 0px  !important; padding-right: 0px  !important;">
                <a class="remove-icon" style="margin-left: 10px;" (click)="removeAdditionalCostLine(i)"></a>
              </td>              
              <td>
                <div>
                  <mat-form-field name="costName">
                    <mat-select 
                            [(ngModel)]="costs.costName.id"
                            (selectionChange)="costNameChange()"
                            [disableOptionCentering]="true"
                            panelClass="general-information-select-container">
                        <mat-option *ngFor="let option of  costNames" [value]="option.id">
                            {{option.name}}
                        </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </td>
              <td>
                <div>
                  <mat-form-field name="costType">
                    <mat-select 
                            [(ngModel)]="costs.costType.id"
                            (selectionChange)="costNameChange()"
                            [disableOptionCentering]="true"
                            panelClass="general-information-select-container">
                        <mat-option *ngFor="let option of costType" [value]="option.id">
                            {{option.name}}
                        </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </td>
              <td>
                <mat-form-field name="invProduct">                    
                     <mat-select 
                            [(ngModel)]="costs.associatedOrderProduct"
                            [disabled]="costs.associatedOrderProduct == 'All' ? false :true"
                            (selectionChange)="costNameChange()"
                            [disableOptionCentering]="true"
                            panelClass="general-information-select-container">
                        <mat-option *ngFor="let option of productDetails" [value]="option.id">
                            {{option.name}}
                        </mat-option>
                    </mat-select> 
                    
                  </mat-form-field>
              </td>
              <td>
                <div style="width:50%;float:left">
                  <mat-form-field name="invQty">
                    <input matInput type="text" name="invQtyNumber" [(ngModel)]="costs.invoiceQuantity">                    
                  </mat-form-field>
                </div>
                <div style="width:48%;float:left">
                  <mat-form-field name="invQtyUOM">                    
                    <mat-select 
                            [(ngModel)]="costs.invoiceQuantityUom.id"
                            (selectionChange)="costNameChange()"
                            [disableOptionCentering]="true"
                            panelClass="general-information-select-container">
                        <mat-option *ngFor="let option of uomNames" [value]="option.id">
                            {{option.name}}
                        </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </td>
              <td>                
                  <div style="width:30%;float:left">
                    <mat-form-field name="invRateCurrency">                    
                      <mat-select 
                              [(ngModel)]="costs.invoiceRateCurrency.id"
                              [disabled]="true"
                              (selectionChange)="costNameChange()"
                              [disableOptionCentering]="true"
                              panelClass="general-information-select-container">
                          <mat-option *ngFor="let option of currencyNames" [value]="option.id">
                              {{option.name}}
                          </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div style="width:38%;float:left;margin-right:2%">
                  <mat-form-field name="invRate">
                    <input matInput type="text" name="invRateNumber" [(ngModel)]="costs.invoiceRate" (ngModelChange)="invoiceRateChange($event,i)">                    
                  </mat-form-field>
                </div>
                <div style="width:30%;float:left" *ngIf="costs.costType.id == 2">
                  <mat-form-field name="invRateUOM">                    
                    <mat-select 
                            [(ngModel)]="costs.invoiceRateUom.id"
                            (selectionChange)="costNameChange()"
                            [disableOptionCentering]="true"
                            panelClass="general-information-select-container">
                        <mat-option *ngFor="let option of uomNames" [value]="option.id">
                            {{option.name}}
                        </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </td>
              <td>
                <div style="width:40%;float:left;line-height: 50px;background-color: #eee;
                padding-left: 5px;">                  
                  {{costs.invoiceRateCurrency.code}}
                </div>
                <div style="width:38%;float:left;margin-right:2%;">
                  
                <mat-form-field name="invAmount">
                  <input matInput type="text" [disabled]="true" name="invAmountNumber" [(ngModel)]="costs.amountInOrderCurrency">                    
                </mat-form-field>
              </div>
              </td>
              <td>
                <div>
                  <mat-form-field name="invExtra">
                    <input matInput type="text" name="invExtraNumber" [(ngModel)]="costs.invoiceExtras" (ngModelChange)="extraAmount($event,i)">                    
                  </mat-form-field>
                </div>
              </td>
              <td>
                <div style="background-color:#eee;line-height:50px;">
                  <!-- {{ costs.costType.id == 2 ? (costs.invoiceRate * costs.invoiceQuantity)* costs.invoiceExtras/100 : costs.invoiceRate * costs.invoiceExtras/100     
                  }} -->
                  <mat-form-field name="invExtraAmt">
                    <input matInput type="text" [disabled]="true" name="invExtraAmtNumber" [(ngModel)]="costs.invoiceExtrasAmount">                    
                  </mat-form-field>
                </div>
              </td>
              <td>
                <div style="line-height: 50px;background-color: #eee;padding-left: 5px;">
                  {{costs.invoiceTotalAmount}}
                </div>
              </td>
              <td>
                <div style="width:40%;float:left;line-height: 50px;background-color: #eee;
                padding-left: 5px;">
                  {{costs.deliveryQuantityUom ? costs.deliveryQuantityUom.name : ''}}
                </div>
                <div style="width:40%;float:left;">
                  <mat-form-field name="delQty">
                    <input matInput type="text" [disabled]="true" name="delQtyNumber" [(ngModel)]="costs.deliveryQuantity">                    
                  </mat-form-field>
                </div>
              </td>
              <td>
                <div style="width:30%;float:left;line-height: 50px;background-color: #eee;
                padding-left: 5px;">
                  {{costs.invoiceRateCurrency.code}}
                </div>
                <div style="width:38%;float:left;margin: 0 1% 0 1%;">
                  <mat-form-field name="estRate">
                    <input matInput type="text" [disabled]="true" name="estRateNumber" [(ngModel)]="costs.estimatedRate">                    
                  </mat-form-field>
                </div>
                <div style="width:30%;float:left;line-height: 50px;background-color: #eee;
                padding-left: 5px;">
                  {{costs.estimatedRateUom ? costs.estimatedRateUom.name : ''}}
                </div>
              </td>
              
              <td> 
                <div style="width:40%;float:left;line-height: 50px;background-color: #eee;
                padding-left: 5px;">
                  {{costs.invoiceRateCurrency.code}}
                </div>
                <div style="width:40%;float:left;">
                  <mat-form-field name="estAmt">
                    <input matInput type="text" [disabled]="true" name="estAmtNumber" [(ngModel)]="costs.estimatedAmount">                    
                  </mat-form-field>
                </div>
              </td>           
              <td>
                <mat-form-field name="estExtra">
                  <input matInput type="text" [disabled]="true" name="estExtraNumber" [(ngModel)]="costs.estimatedExtras">                    
                </mat-form-field>
              </td>
              <td>
                <mat-form-field name="estExtraAmt">
                  <input matInput type="text" [disabled]="true" name="estExtraAmtNumber" [(ngModel)]="costs.estimatedExtrasAmount">                    
                </mat-form-field>
              </td>
              <td>
                <div style="line-height: 50px;background-color: #eee;padding-left: 5px;">
                  {{costs.estimatedAmount + costs.estimatedExtrasAmount}}
                </div>
              </td>
              <td>
                <div style="line-height: 50px;background-color: #eee;padding-left: 5px;">
                  {{costs.costType.id == 2 ? (costs.invoiceTotalAmount) - (costs.estimatedAmount + costs.estimatedExtrasAmount) : costs.difference}}
                </div>                
              </td>
            </tr>
          </ng-container>
      </tbody>
    </table>
  </div>