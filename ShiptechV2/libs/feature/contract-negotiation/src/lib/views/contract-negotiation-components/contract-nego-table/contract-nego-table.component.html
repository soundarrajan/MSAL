<div class="contract-nego-grid igrid-container">
    <table>
        <thead>
            <tr class="h-shadow header-row" *ngIf="this.chipSelected == 1">
                <th>
                    <ng-container *ngTemplateOutlet="headerCheckbox"></ng-container>
                </th>
                <th *ngFor="let col of coln;let i=index" class="h-content"
                    [ngClass]="{'header-border-right':col=='Port Rating','p-l-8':col=='Product'}">
                    <div class="resizing">{{col}}</div></th>
                <!-- <ng-container *ngIf="periodicity=='M'"> -->
                <th *ngFor="let col of colnPeriod;let i=index" class="h-content"
                    [ngClass]="{'header-border-right':col=='Port Rating','p-l-8':col=='Product'}">
                    {{col}}</th>
                <!-- </ng-container> -->
                <!-- <ng-container *ngIf="periodicity=='Q'">
                    <th  *ngFor="let col of colnQuarterly;let i=index" class="h-content"
                        [ngClass]="{'header-border-right':col=='Port Rating'}">
                        {{col}}</th>
                </ng-container> -->

            </tr>
            <tr class="h-shadow header-row" *ngIf="this.chipSelected == 2">
                <th>
                    <ng-container *ngTemplateOutlet="headerCheckbox"></ng-container>
                </th>
                <th *ngFor="let col of fdColn;let i=index" class="h-content"
                    [ngClass]="{'header-border-right':col=='Port Rating'}">
                    {{col}}</th>
            </tr>
        </thead>
        <tbody>
            <ng-container *ngFor="let item of rowData;let i=index">
                <ng-container *ngIf="item.data.length>0">
                    <tr class="status-name-row">
                        <td colspan="4" class="groupedCol1" style="border-right: 2px solid  #E6E8EC!important;">
                            <div></div>
                        </td>
                        <td colspan="12" class="groupedCol2">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div class="ellipsis m-l-5 m-r-5 ">{{item.statusName}}</div>

                                    <div class="count m-l-5"
                                        [ngClass]="{'offers':item.status==0,'await':item.status==1,'approved':item.status==2,'rejected':item.status==3,'contracted':item.status==4}">
                                        <div class="count-value">{{item.data.length}}</div>
                                    </div>
                                </div>
                                <div [ngClass]="{'toggle-icon-open':!item.showDetail,'toggle-icon-close':item.showDetail}"
                                    (click)="item.showDetail = !item.showDetail"></div>
                            </div>
                        </td>
                    </tr>
                    <ng-container *ngIf="item.showDetail">
                        <tr *ngFor="let row of item.data;let j=index" class="table-row"
                            [ngClass]="{'contractedRow':row.status==4}">
                            <td class="checkbox-column">
                                <mat-checkbox class="tableCheckBox" [(ngModel)]="row.check"
                                    (change)="rowChecked($event.checked,j)">
                                </mat-checkbox>
                            </td>
                            <td class="name-column" [matTooltip]="row.name" matTooltipClass="lightTooltip"
                                [matMenuTriggerFor]="clickmenupopup" #menuPopupTrigger="matMenuTrigger"
                                (click)="menuPopupTrigger.closeMenu()" [matMenuTriggerData]="{data: row}"
                                (contextmenu)="$event.preventDefault();$event.stopPropagation();menuPopupTrigger.openMenu()">
                                <div class="d-flex justify-content-between">
                                    <div class="ellipsis-text">{{row.name}}</div>
                                    <div *ngIf="row.rfqStatus" (click)="openEmailPreview()" class="preview-rfq-icon">
                                    </div>
                                </div>
                            </td>
                            <td class="rating-column" [matTooltip]="row.genRating" matTooltipClass="lightTooltip"
                                (click)="sellerratingpopup('general',row.genRating,'',row.portRating,'')">
                                <div class="rating-chip">
                                    <div class="chip">{{row.genRating}} <span class="star"></span> </div>
                                </div>
                            </td>
                            <td class="rating-column" style="border-right: 2px solid  #E6E8EC!important;"
                                (click)="sellerratingpopup('port',row.genRating,'',row.portRating,'')"
                                [matTooltip]="row.portRating" matTooltipClass="lightTooltip">
                                <div class="rating-chip">
                                    <div class="chip">{{row.portRating}} <span class="star"></span></div>
                                </div>
                            </td>
                            <ng-container *ngIf="this.chipSelected == 1 && !(noQuoteRow == j && noQuote)">
                                <td class="table-cell-width" [matTooltip]="row.product" matTooltipClass="lightTooltip"
                                    style="padding: 0px 5px 0px 15px !important;">
                                    <div [attr.contenteditable]="row.status!=2 && row.status!=4?true:false"
                                        [ngClass]="{'editable-cell':row.rfqStatus && row.status!=2 && row.status!=4}"
                                        *ngIf="row.rfqStatus || row.status==2 || row.status==4"
                                        [matMenuTriggerFor]="clickmenu1" #menuTrigger="matMenuTrigger"
                                        [matMenuTriggerData]="{data: row}" class="cell-input">
                                        {{row.product}}
                                    </div>
                                    <mat-menu #clickmenu1="matMenu" class="add-new-request-menu">
                                        <ng-template matMenuContent let-aliasMenuItems="data">
                                            <div class="expansion-popup" style="margin: 20px 0px;">
                                                <div class="select-product-container">
                                                    <div class="col-md-12 header-container-product"
                                                        (click)="$event.stopPropagation(); $event.preventDefault();">
                                                        <div class="search-product-container col-md-10">
                                                            <span class="search-product-lookup">
                                                            </span>
                                                            <input matInput #inputBox1
                                                                placeholder="Search all and select a location"
                                                                class="search-product-input">
                                                        </div>
                                                        <div class="col-md-2">
                                                            <span class="expand-img"></span>
                                                        </div>
                                                    </div>
                                                    <table
                                                        class="delivery-products-pop-up shiptech-delivery-popup col-md-12 no-padding"
                                                        mat-table [dataSource]="dataSource">

                                                        <ng-container matColumnDef="product">
                                                            <th mat-header-cell *matHeaderCellDef> Products </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                <mat-option [value]="element.product"
                                                                    style="padding-left:0">
                                                                    <mat-radio-button [value]="element.product"
                                                                        (click)="updateProduct(aliasMenuItems,element.product)">
                                                                        {{element.product}}
                                                                    </mat-radio-button>
                                                                </mat-option>
                                                            </td>
                                                        </ng-container>


                                                        <ng-container matColumnDef="type">
                                                            <th mat-header-cell *matHeaderCellDef> Type </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                <mat-option>
                                                                    {{element.type}}
                                                                </mat-option>
                                                            </td>
                                                        </ng-container>
                                                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                                        <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </mat-menu>
                                </td>
                                <td class="table-cell-width" [matTooltip]="row.spec" matTooltipClass="lightTooltip">
                                    <div class="cell-input"
                                        [attr.contenteditable]="row.status!=2 && row.status!=4?true:false"
                                        *ngIf="(row.rfqStatus && row.status==0)|| row.status!=0"
                                        [ngClass]="{'editable-cell':row.rfqStatus && row.status!=2 && row.status!=4}">
                                        <input [(ngModel)]="row.spec" *ngIf="row.status!=2 && row.status!=4">
                                        <div *ngIf="row.status==2 || row.status==4">
                                            {{row.spec}}
                                        </div>
                                    </div>
                                </td>
                                <td class="input-with-select table-cell-width" [matTooltip]="row.qtyMin"
                                    matTooltipClass="lightTooltip">
                                    <div *ngIf="(row.rfqStatus && row.status==0)|| row.status!=0"
                                        class="d-flex align-items-center justify-content-between"
                                        [ngClass]="{'editable-cell':row.status!=2 && row.status!=4}">
                                        <div [attr.contenteditable]="row.status!=2 && row.status!=4?true:false"
                                            class="cell-input">
                                            <input [(ngModel)]="row.qtyMin" *ngIf="row.status!=2 && row.status!=4">
                                            <div *ngIf="(row.status==2 || row.status==4)">
                                                {{row.qtyMin}}</div>
                                        </div>
                                        <mat-form-field class="p-l-2 p-r-2" appearance="none">
                                            <mat-select disableOptionCentering [(ngModel)]="row.qtyMinUnit"
                                                panelClass="unitcurrencytrigger"
                                                [disabled]="row.status==2 || row.status==4">
                                                <mat-select-trigger>
                                                    {{row.qtyMinUnit}}
                                                </mat-select-trigger>
                                                <div class="fs-12 p-5-8">Change Unit</div>
                                                <div style="max-height: 113px;overflow:auto;">
                                                    <mat-option class="currency-mat-select"
                                                        *ngFor="let frequency of unitArr"
                                                        [value]="frequency.abbriviation">
                                                        <span>
                                                            <mat-radio-button>{{ frequency.abbriviation}}
                                                            </mat-radio-button>
                                                        </span>
                                                    </mat-option>
                                                </div>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </td>
                                <td class="input-with-select table-cell-width" [matTooltip]="row.qtyMax"
                                    matTooltipClass="lightTooltip">
                                    <div *ngIf="(row.rfqStatus && row.status==0)|| row.status!=0"
                                        class="d-flex align-items-center justify-content-between"
                                        [ngClass]="{'editable-cell':row.status!=2 && row.status!=4}">
                                        <div [attr.contenteditable]="row.status!=2 && row.status!=4?true:false"
                                            class="cell-input">
                                            <input [(ngModel)]="row.qtyMax" *ngIf="row.status!=2 && row.status!=4">
                                            <div *ngIf="(row.status==2 || row.status==4)">
                                                {{row.qtyMax}}</div>
                                        </div>

                                        <mat-form-field class="p-l-2 p-r-2" appearance="none">
                                            <mat-select disableOptionCentering [(ngModel)]="row.qtyMaxUnit"
                                                panelClass="unitcurrencytrigger"
                                                [disabled]="row.status==2 || row.status==4">
                                                <mat-select-trigger>
                                                    {{row.qtyMaxUnit}}
                                                </mat-select-trigger>
                                                <div class="fs-12 p-5-8">Change Unit</div>
                                                <div style="max-height: 113px;overflow:auto;">
                                                    <mat-option class="currency-mat-select"
                                                        *ngFor="let frequency of unitArr"
                                                        [value]="frequency.abbriviation">
                                                        <span>
                                                            <mat-radio-button>{{ frequency.abbriviation}}
                                                            </mat-radio-button>
                                                        </span>
                                                    </mat-option>
                                                </div>
                                            </mat-select>
                                        </mat-form-field>

                                    </div>
                                </td>
                                <td class="table-cell-width input-with-select" [matTooltip]="row.offPrice"
                                    matTooltipClass="lightTooltip">
                                    <div *ngIf="(row.rfqStatus && row.status==0)|| row.status!=0"
                                        [attr.contenteditable]="row.status!=4?true:false"
                                        class="d-flex align-items-center">
                                        <!-- <mat-form-field class="p-l-2 p-r-2" appearance="none">
                                            <mat-select disableOptionCentering [(ngModel)]="row.offerPriceCur"
                                                panelClass="unitcurrencytrigger" [disabled]="row.status==4">
                                                <mat-select-trigger>
                                                    {{row.offerPriceCur}}
                                                </mat-select-trigger>
                                                <div class="fs-12 p-5-8">Change Currency</div>
                                                <div style="max-height: 113px;overflow:auto;">
                                                    <mat-option class="currency-mat-select"
                                                        *ngFor="let frequency of currencyArr"
                                                        [value]="frequency.abbriviation">
                                                        <span>
                                                            <mat-radio-button>{{ frequency.abbriviation}}
                                                            </mat-radio-button>
                                                        </span>
                                                    </mat-option>
                                                </div>
                                            </mat-select>
                                        </mat-form-field> -->
                                        <div [ngClass]="{'editable-cell':row.status!=4}"
                                            [matMenuTriggerFor]="priceMenupopup" #pricePopupTrigger="matMenuTrigger"
                                            (click)="pricePopupTrigger.closeMenu()" class="cell-input"
                                            (contextmenu)="$event.preventDefault();$event.stopPropagation();pricePopupTrigger.openMenu();">
                                            <input [(ngModel)]="row.offPrice" *ngIf="row.status!=4">
                                            <div *ngIf="row.status==4">
                                                {{row.offPrice}}</div>

                                        </div>
                                        <mat-menu #priceMenupopup="matMenu" class="darkPanel-add big">
                                            <div class="add-block" (click)="formulaPricingPopup(i,j)">
                                                <div></div><span>Add/View Formula pricing</span>
                                            </div>
                                            <div class="divider-line"></div>
                                            <div class="add-block" (click)="additionalCostPopup(i,j)">
                                                <div></div><span>Add/View Additional Cost</span>
                                            </div>
                                            <div class="divider-line"></div>
                                            <div class="add-block" (click)="modifyOfferPeriod($event,params,row)">
                                                <div></div><span>Modify Offer Period</span>
                                            </div>
                                        </mat-menu>
                                    </div>
                                </td>
                                <td class="table-cell-width" [matTooltip]="row.validity" matTooltipClass="lightTooltip">
                                    <div
                                        *ngIf="(row.rfqStatus && row.status==0)|| (row.status!=0 && row.status!=2 && row.status!=4)">
                                        <input matInput
                                            [ngClass]="{'editable-date-cell':row.status!=2 && row.status!=4}"
                                            [matDatepicker]="picker" [(ngModel)]="row.validity"
                                            (click)="$event.stopPropagation();picker.open();">
                                        <mat-datepicker
                                            [panelClass]="dark?'new-datepicker datepicker-darktheme':'new-datepicker'"
                                            #picker>
                                        </mat-datepicker>
                                    </div>
                                    <div *ngIf="row.status==2 || row.status==4">
                                        {{row.validity}}</div>
                                    <!-- 
                    <input #timepicker [(ngModel)]="timerValue" (dateTimeChange)="onChange($event)"
                        [owlDateTimeTrigger]="dt" [owlDateTime]="dt" style="position: relative;top: -19px;
               width: 100px;visibility:hidden;border: none"> -->
                                    <!-- <div class="time-pick-container">
                        <owl-date-time [pickerType]="'timer'" #dt
                            [panelClass]="dark?['timerPanelClass', 'darktheme']:'timerPanelClass'"
                            (afterPickerClosed)="timepickerClosed()" (afterPickerOpen)="timepickerOpened()">
                        </owl-date-time>
                    </div> -->
                                </td>
                                <ng-container *ngIf="periodicity=='M'">
                                    <ng-container *ngIf="row.status!= 2 && row.status!= 4">
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.m1!='' && row.offerPeriod>=1"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.m1check"
                                                    (change)="isM1checked($event)">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m1bestValue}">
                                                    {{row.m1}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.m2!='' && row.offerPeriod>=2"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.m2check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m2bestValue}">
                                                    {{row.m2}}
                                                </div>

                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.m2!='' && row.offerPeriod>=3"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.m3check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m3bestValue}">
                                                    {{row.m3}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.m4!='' && row.offerPeriod>=4"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.m4check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m4bestValue}">
                                                    {{row.m4}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.m5!='' && row.offerPeriod>=5"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.m5check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m5bestValue}">
                                                    {{row.m5}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.m6!='' && row.offerPeriod==6"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.m6check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m6bestValue}">
                                                    {{row.m6}}
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="row.status== 2 || row.status== 4">
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.m1bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m1bestValue}">
                                                    {{row.m1}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.m2bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m2bestValue}">
                                                    {{row.m2}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.m3bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m3bestValue}">
                                                    {{row.m3}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.m4bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m4bestValue}">
                                                    {{row.m4}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.m5bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m5bestValue}">
                                                    {{row.m5}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.m6bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.m6bestValue}">
                                                    {{row.m6}}
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngIf="periodicity=='Q'">
                                    <ng-container *ngIf="row.status!= 2 && row.status!= 4">
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.q1!='' && row.offerPeriod>=1"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.q1check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q1bestValue}">
                                                    {{row.q1}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.q2!='' && row.offerPeriod>=2"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.q2check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q2bestValue}">
                                                    {{row.q2}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.q2!='' && row.offerPeriod>=3"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.q3check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q3bestValue}">
                                                    {{row.q3}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div *ngIf="row.rfqStatus && row.priceCalculated && row.q4!='' && row.offerPeriod>=4"
                                                class="d-flex align-items-center field-with-checkbox">
                                                <mat-checkbox class="cellCheckBox" [(ngModel)]="row.q4check">
                                                </mat-checkbox>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q4bestValue}">
                                                    {{row.q4}}
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="row.status== 2 || row.status== 4">
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.q1bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q1bestValue}">
                                                    {{row.q1}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.q2bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q2bestValue}">
                                                    {{row.q2}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.q3bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q3bestValue}">
                                                    {{row.q3}}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="w-chkbox"
                                            [ngClass]="{'await':row.status==1,'approved':row.status==2,'rejected':row.status==3,'contracted':row.status==4}">
                                            <div class="d-flex align-items-center field-with-checkbox">
                                                <div [ngClass]="{'tickIcon':row.q4bestValue}"></div>
                                                <div class="w-chkbox-value" [ngClass]="{'bestValue':row.q4bestValue}">
                                                    {{row.q4}}
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
                            <ng-container *ngIf="this.chipSelected == 2 && !(noQuoteRow == j && noQuote)">
                                <td style="padding: 0px 5px 0px 15px !important;" [matTooltip]="row.fdProduct"
                                    matTooltipClass="lightTooltip">
                                    <span>{{row.rfqStatus?row.fdProduct:''}}</span>
                                </td>
                                <td [matTooltip]="row.fdTotalContractAmt" matTooltipClass="lightTooltip">
                                    <span>{{row.rfqStatus?row.fdTotalContractAmt:''}}</span>
                                </td>
                                <td [matTooltip]="row.fdFomulaDesc" matTooltipClass="lightTooltip">
                                    <span>{{row.rfqStatus?row.fdFomulaDesc:''}}</span>
                                </td>
                                <td [matTooltip]="row.fdSchedule" matTooltipClass="lightTooltip">
                                    <span>{{row.rfqStatus?row.fdSchedule:''}}</span>
                                </td>
                                <td [matTooltip]="row.fdPremium" matTooltipClass="lightTooltip">
                                    <span>{{row.rfqStatus?row.fdPremium:''}}</span>
                                </td>
                                <td [matTooltip]="row.fdAddCosts" matTooltipClass="lightTooltip">
                                    <span>{{row.rfqStatus?row.fdAddCosts:''}}</span>
                                </td>
                                <td contenteditable="true" class="table-cell-width" [matTooltip]="row.genRating"
                                    matTooltipClass="lightTooltip">
                                    <div [ngClass]="{'editable-cell':row.rfqStatus}">{{row.rfqStatus?row.fdRemarks:''}}
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container *ngIf="noQuoteRow == j && noQuote">
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow">No Quote</td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                                <td class="noQuoteRow"></td>
                            </ng-container>
                            <ng-container>
                                <div class="rowTooltip">
                                    <span class="white-space"></span>
                                    <span class="linkImg"></span>
                                    <span class="linkText">Link to Contract 12321</span>
                                </div>
                            </ng-container>
                        </tr>

                    </ng-container>
                </ng-container>
            </ng-container>
        </tbody>
    </table>
</div>
<mat-menu #clickmenupopup="matMenu" class="small-menu darkPanel">
    <ng-template matMenuContent let-aliasMenuItems="data">
        <div class="p-tb-5" style="display:flex;align-items:center;" (click)="addAnotherOffer(aliasMenuItems)">
            <div class="popup-icon-align">
                <div class="add-blue-icon"></div>
            </div>
            <div class="fs-13">Add another offer</div>
        </div>
        <div class="p-tb-5" style="display:flex;align-items:center;">
            <div class="popup-icon-align">
                <div class="preview-rfq-icon"></div>
            </div>
            <div class="fs-13" (click)="openEmailPreview(params)">Preview RFQ email</div>
        </div>
        <hr class="menu-divider-line">

        <ng-container *ngIf="aliasMenuItems.status==4">
            <div class="p-tb-5" (click)="addToAnotherNego()" style="display:flex;align-items:center;">
                <div class="popup-icon-align">
                    <div class="add-blue-icon"></div>
                </div>
                <div class="fs-13">Add to another nego</div>
            </div>
            <hr class="menu-divider-line">
        </ng-container>
        <div class="p-tb-5" style="display:flex;align-items:center;">
            <div class="popup-icon-align">
                <div class="delete-icon"></div>
            </div>
            <div class="fs-13" (click)="deleteRow(aliasMenuItems)">Remove counterparty</div>
        </div>
    </ng-template>
</mat-menu>
<ng-template #headerCheckbox>
    <mat-checkbox class="tableCheckBox" [(ngModel)]="allComplete" (change)="setAll($event.checked)"></mat-checkbox>
</ng-template>