<div class="col-md-12 row delivery-products-group">
  <a class="add-product-dropdown-icon" (click)="addNewProduct()"></a>
  <div class="product-tabs" *ngIf="formValues.deliveryProducts && formValues.deliveryProducts.length">
    {{selectedProduct}}
      <div *ngFor="let deliveryProduct of formValues.deliveryProducts | keyvalue">
        <div (click)="selectProduct(deliveryProduct.key)"  class="product-tab" >
            <div class="bootstrap-tagsinput"> 
                <span class="tag label border-default">
                    <a><i class="fa fa-close font-red-thunderbird" ></i></a>
                  {{deliveryProduct.value.product.name}}
                </span>
            </div>
        </div>
      </div>
  </div>
  <div *ngIf="!hideDropdown" class="select-product">
    <mat-form-field  appearance="fill">
      <mat-label>Add product</mat-label>
      <mat-select [disableOptionCentering]="true" 
                  panelClass="select-product-container"
                  [(ngModel)]="selectedProductToAddInDelivery"
                  (selectionChange)="addSelectedProductInDelivery(selectedProductToAddInDelivery)">
        <div class="col-md-12 header-container-product">
          <div class="search-product-container col-md-10">
            <span class="search-product-lookup">
            </span>
            <input matInput 
                  placeholder="Search all and select a location"
                  class="search-product-input"
                  (input)="search($event.target.value)">
          </div>
          <div class="col-md-2">
              <img alt="Shiptech" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAEmSURBVFhH7ZahCgJBEIZ9KruYxatiF6vBdsWk2WiyXTGJweIjiMEkglHxKVb+MDCOw84ernhhBr7gzr/Dd3vcYqvdKUKTcCELF7JwIYuoUH8wCuNJqaLlCS0PME/Lc6JCq3UVtJotlmqeQF8rzNPynNpClgyhSWUXuj+eodsbqlkJcsjz+skJXa43Uwp95GRlE8Lx81cQk5IyfG8WIQyj31xqtz+8ZQmsU8m9Xwtpp4DBKSfEZXhPrkmiQv/AhSxcyKK2EL6UaTlXewT6KV+URlRIDqZPWt4xHKyj5NWQ8iAgKoSLjAZzGZQlhJJ7s9zUNDhFhpBStDebEC9LhuBSVNmF/O+HBMd+PJ0/qDZbNU+gr+1Led1RoX/gQhYuZOFCFg0TKsILCN4aRzqXaa8AAAAASUVORK5CYII=">
          </div>
        </div>
        <table *ngIf="formValues.temp.deliverySummaryProducts" class="delivery-products-pop-up col-md-12 no-padding" mat-table [dataSource]="formValues.temp.deliverySummaryProducts">
          <!-- Product Column -->
          <ng-container matColumnDef="product">
            <th mat-header-cell *matHeaderCellDef> Products in order </th>
            <td mat-cell *matCellDef="let element"> 
              <mat-option [value]="element">
                <mat-radio-button [value]="element">   
                  {{element.product.name}} 
                </mat-radio-button>
              </mat-option>
            </td>
          </ng-container>

          <!-- Product type Column -->
          <ng-container matColumnDef="productType">
            <th mat-header-cell *matHeaderCellDef> Type </th>
            <td mat-cell *matCellDef="let element"> 
              <mat-option>
                {{element.productType.name}} 
              </mat-option>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </mat-select>
    </mat-form-field>
  </div>
</div>
<div *ngIf="formValues.deliveryProducts && formValues.deliveryProducts.length"> 
  <div  *ngFor="let deliveryProduct of formValues.deliveryProducts | keyvalue">
    <div *ngIf="deliveryProduct.key == selectedProduct" class="product-container">
      <shiptech-delivery-product [formValues]="formValues"
                                [deliveryProductIndex]="deliveryProduct.key"
                                [conversionInfoData]="conversionInfoData"
                                [buttonClicked]="buttonClicked"
                                [uoms]="uoms"
                                [quantityCategory]="quantityCategory"
                                [finalQuantityRules]="finalQuantityRules"
                                [toleranceLimits]="toleranceLimits"
                                [events]="deliveryFormSubject.asObservable()"
                                [events1]="conversionDataInfoSubject.asObservable()"
                                [events2]="requiredInfoSubject.asObservable()">
      </shiptech-delivery-product>
      <shiptech-product-quality  [formValues]="formValues"
                                [deliveryProductIndex]="deliveryProduct.key"
                                [events]="deliveryFormSubject.asObservable()">
      </shiptech-product-quality>
      <shiptech-product-quantity [formValues]="formValues"
                                [deliveryProductIndex]="deliveryProduct.key"
                                [events]="deliveryFormSubject.asObservable()">
      </shiptech-product-quantity>
    </div>
  </div>
</div>
<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-spin-clockwise-fade">
</ngx-spinner>
